maintainer="Barnabas Czeman <barnabas.czeman@postmarketos.org>"
pkgname=msm-modem-wwan-port
pkgver=2
pkgrel=0
pkgdesc="Open wwan port for older Qualcomm SoCs."
url="https://postmarketos.org/"
arch="armhf armv7 aarch64"
license="GPL-3.0-or-later"
depends="rmtfs"
subpackages="
	$pkgname-openrc
	$pkgname-systemd
"

source="
	msm-modem-wwan-port
	msm-modem-wwan-port.initd
	msm-modem-wwan-port.service
"
options="!check"

package() {
	install -Dm755 "$srcdir"/msm-modem-wwan-port \
		-t "$pkgdir"/usr/libexec/
	install -Dm644 "$srcdir"/msm-modem-wwan-port.service \
		-t "$pkgdir"/usr/lib/systemd/system/
}

openrc() {
	install_if="$pkgname=$pkgver-r$pkgrel openrc"
	depends="openrc rmtfs-openrc"
	install="$subpkgname.post-install"

	install -Dm755 "$srcdir/$pkgname.initd" \
		"$subpkgdir/etc/init.d/$pkgname"
}

sha512sums="
14b91d616d796d89c3b7497b85ddd998f6108546118aee44531eb26183d3d09b0f6bb3f6a47840afbfc7bed115c4d6ac31369046b7281cfb3dc8a54f0fc8c58e  msm-modem-wwan-port
133a18b2fb5a1753a9a1b7ff37faf69642f90be451484ba85235bba60394d66b875574bcc6461c0dffbf2bb80f37b9e95f280858f8893c7b79070bb7261305b3  msm-modem-wwan-port.initd
f380d0a4760f0d19ea65b5fea7ca5e1eee28eb162fd15efec318bddb3ea1735f2c891d9d129227e959a2ac479b49f2c438170fe1fdd2c91abf564f7b111a97c3  msm-modem-wwan-port.service
"
