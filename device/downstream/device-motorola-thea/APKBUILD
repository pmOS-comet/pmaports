# Reference: <https://postmarketos.org/devicepkg>
pkgname=device-motorola-thea
pkgver=3
pkgrel=1
pkgdesc="Motorola Moto G 2014"
url="https://postmarketos.org"
arch="armv7"
license="MIT"
depends="
	postmarketos-base
	postmarketos-base-downstream-disable-udev-v4l
	linux-motorola-titan
	mkbootimg
	msm-fb-refresher
"
makedepends="devicepkg-dev"
install="$pkgname.post-install"
subpackages="
	$pkgname-nonfree-firmware:nonfree_firmware
	$pkgname-udev
"
source="deviceinfo 90-android-touch-dev.rules profile.sh"
options="!check !archcheck"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
	install -Dm644 "$srcdir"/90-android-touch-dev.rules \
		"$pkgdir"/usr/lib/udev/rules.d/90-android-touch-dev.rules
	install -Dm644 "$srcdir"/profile.sh \
		"$pkgdir"/etc/profile.d/00-$pkgname.sh
}

nonfree_firmware() {
	pkgdesc="Wifi firmware"
	depends="firmware-motorola-titan"
	mkdir "$subpkgdir"
}

sha512sums="
72440908509bc0142a645b5ace8c346fe32854eb504aa8be0ed0a005116f0fd491061dcb9c57c3c8c40c0bff87858af6db791d3f7e0abc1e1a11c936fe9c542f  deviceinfo
8406968cd554393ea1e350967c80810d059de2b1d33ea1302e265780c1f0110d64cf15a68c2f374981a88906d0317315e0a71995c85fd5eaf93bb47ed427529c  90-android-touch-dev.rules
d04013c17caf77a87ebea167dbe48f7efa9c9d3123c5743d359f3ea8ccc6b268fa021535a4bf8291eb4a352f0c92f6eb527da0db340421f53bc1cc439a453306  profile.sh
"
