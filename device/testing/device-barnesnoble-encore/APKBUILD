# Reference: <https://postmarketos.org/devicepkg>
maintainer=""
pkgname=device-barnesnoble-encore
pkgdesc="Barnes & Noble Nook Color"
pkgver=3
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="armv7"
options="!check !archcheck"
depends="
	linux-postmarketos-omap
	postmarketos-base
	u-boot-tools
"
_pmb_recommends="linux-firmware-ti-connectivity"
makedepends="devicepkg-dev u-boot-tools"
subpackages="$pkgname-x11"
source="
	deviceinfo
	modules-initfs
	xorg-rotate-monitor.conf
"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
}

x11() {
	install_if="$pkgname=$pkgver-r$pkgrel xorg-server"

	install -Dm644 "$srcdir"/xorg-rotate-monitor.conf \
		"$subpkgdir"/etc/X11/xorg.conf.d/30-rotate-monitor.conf
}

sha512sums="
0d3275e13534f5ba42db1cba95fb218e8f40d77f2329a3f7e143f78e550a81e37bedf9acd4b5a6fe028f9af6f2fc1ec4489974da595d7d52b808a4f3d1720766  deviceinfo
0491da0e90890b7884c8af5e5a8b3541a6aa298e7980c3179e4eb193f2f22767add0811bb7abb00abab7faa74bf35e1243b97e308fb1005c9e26d3aef99da3a2  modules-initfs
74123128f1f7254a2fa22f9aa719d9922514b6b8deef661291d50c544aa5c82c05b1910dc9e7db9037a3f00ceacec527ba6ab74df53c7815cbf21384f3e445c1  xorg-rotate-monitor.conf
"
