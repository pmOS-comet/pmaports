# Reference: <https://postmarketos.org/devicepkg>
# Maintainer: Robert Eckelmann <longnoserob@postmarketos.org>

pkgname=device-solidrun-cubox
pkgdesc="SolidRun CuBox"
pkgver=5
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="armv7"
options="!check !archcheck"
depends="
	linux-postmarketos-marvell
	postmarketos-base
	u-boot-tools
"
makedepends="
	devicepkg-dev
	u-boot-tools
"
source="
	deviceinfo
	boot.cmd
"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
	mkimage -A arm -O linux -T script -C none -n "uBoot commands" -d "$srcdir"/boot.cmd "$srcdir"/boot.scr
	install -Dm755 "$srcdir"/boot.cmd "$pkgdir"/boot/boot.cmd
	install -Dm755 "$srcdir"/boot.scr "$pkgdir"/boot/boot.scr
}

sha512sums="
b4ba927fdd2f92ca532f6cc34fa7046d6386cff2f3d67c96127cdd17d63138784b7ddffa388982cae49a1cedcbf506cc89b65cf8a1a39d3fe2ae3fc0c90b49c0  deviceinfo
c651eb52066d6a8aa48388b391de0c9a4d85369adce3d2228bd3dfaa4d3ab797dbeca6965d5e3b898a378cb9d52215f946e497c44fc37b5fc668ec79d5f24ffc  boot.cmd
"
