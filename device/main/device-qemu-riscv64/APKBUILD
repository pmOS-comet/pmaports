# Reference: <https://postmarketos.org/devicepkg>
# Co-Maintainer: Achill Gilgenast <achill@achill.org>
maintainer="Luca Weiss <luca@lucaweiss.eu>"
pkgname=device-qemu-riscv64
pkgver=10
pkgrel=0
pkgdesc="Simulated device in QEMU (riscv64)"
url="https://postmarketos.org"
arch="riscv64"
license="MIT"
depends="
	postmarketos-base
	postmarketos-qemu-common
	"
makedepends="devicepkg-dev"
subpackages="
	$pkgname-kernel-stable:kernel_stable
	"

source="
	kernel-cmdline.conf
	deviceinfo
	"
options="!check !archcheck"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
}

kernel_stable() {
	pkgdesc="Alpine Stable kernel"
	depends="linux-stable linux-firmware-none"
	provides="$pkgname-kernel-edge=$pkgver-r$pkgrel"
	replaces="$pkgname-kernel-edge"
	devicepkg_subpackage_kernel $startdir $pkgname $subpkgname
}

sha512sums="
8411587834a64f96673e890195d7e6d7451e0316a69126197a4d6a1522e36c7c5a8a522647f1712038653803d19cf27916a66c6f0e409bd41ddca19f6ff1cda9  kernel-cmdline.conf
78d0252f49f4b0f527a2f6c726abe32cd112553fdcd5793070999dfeb331c4d94fbc63ca163ea282f439f0f069cdbeea5051d9e9aeb8831a3862076b04357c5e  deviceinfo
"
