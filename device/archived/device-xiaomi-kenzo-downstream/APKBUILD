# Archived: unmaintained port, only for testing. Use generic/mainline port (qcom-msm8956)
# Reference: <https://postmarketos.org/devicepkg>
pkgname=device-xiaomi-kenzo-downstream
pkgdesc="Xiaomi Redmi Note 3 (Downstream)"
pkgver=4
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="aarch64"
options="!check !archcheck"
depends="postmarketos-base linux-xiaomi-kenzo-downstream mkbootimg mdss-fb-init-hack"
makedepends="devicepkg-dev"
subpackages="$pkgname-nonfree-firmware:nonfree_firmware"
source="deviceinfo
	kernel-cmdline.conf
	fb.modes
	directfbrc"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname

	install -Dm644 "$srcdir"/fb.modes "$pkgdir"/etc/fb.modes
	install -Dm644 "$srcdir"/directfbrc "$pkgdir"/etc/directfbrc
}

nonfree_firmware() {
	pkgdesc="Wifi firmware"
	depends="firmware-xiaomi-kenzo"
	mkdir "$subpkgdir"
}

sha512sums="
77b4ec5836aa920693a1312d49315a82859673ee3bc2e6a09787f55c10945530b75eb4cf0f2151789da5ebf8ef3a965dc7734b823af23986e990e3ebe668b3b4  deviceinfo
cc38190984cd91a1bdc9662d14519d9abfe1c44f429cded44ad3041259946bc649ab11f3ccb09b95608c1c01c4a0594f9b5f0ca9b64fa4999c53dc95554ffd03  kernel-cmdline.conf
646cedb1c4675ef04530f8cab305a48767ddc894d1d08541aae3a4c124268ca9ef88aa4fa6ad507d8618f4355144a206a32f5a75ade8e60ab1fc9a338d5209f8  fb.modes
19b0a9ae89ad4ad1adfcc2a1b5a1abfe71f560c2857e392f904c393f0b3bb4d29d7c2fbf8e080227d50e7e13f53fd5a5f3b0902c89582ec3e2742430ade19f07  directfbrc
"
